<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-tw">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="Javascript,IThome2018,Reason,">








  <meta property="fb:admins" content="279782192201043">
  <meta property="fb:app_id" content="179588245956664">



<meta name="description" content="Module模組就像是一個小的檔案 可以用 let binding 內嵌 module 建立使用 module 這個關鍵字來宣告 12345678910module School = &amp;#123;  type profession = Teacher | Director;  let person1 = Teacher;  let getProfession = (person) =&amp;gt;">
<meta name="keywords" content="Javascript,IThome2018,Reason">
<meta property="og:type" content="article">
<meta property="og:title" content="Reason-BasicType-Module">
<meta property="og:url" content="http://yoursite.com/2018/10/27/Reason-BasicType-Module/index.html">
<meta property="og:site_name" content="湯瑪士的部落格">
<meta property="og:description" content="Module模組就像是一個小的檔案 可以用 let binding 內嵌 module 建立使用 module 這個關鍵字來宣告 12345678910module School = &amp;#123;  type profession = Teacher | Director;  let person1 = Teacher;  let getProfession = (person) =&amp;gt;">
<meta property="og:locale" content="zh-tw">
<meta property="og:updated_time" content="2021-12-15T14:25:45.997Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Reason-BasicType-Module">
<meta name="twitter:description" content="Module模組就像是一個小的檔案 可以用 let binding 內嵌 module 建立使用 module 這個關鍵字來宣告 12345678910module School = &amp;#123;  type profession = Teacher | Director;  let person1 = Teacher;  let getProfession = (person) =&amp;gt;">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.3',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Tomas'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2018/10/27/Reason-BasicType-Module/">





  <title>Reason-BasicType-Module | 湯瑪士的部落格</title>
  
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId      : '179588245956664',
      xfbml      : true,
      version    : 'v2.10'
    });
  };

  (function(d, s, id){
     var js, fjs = d.getElementsByTagName(s)[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement(s); js.id = id;
     js.src = "//connect.facebook.net/zh_tw/sdk.js";
     fjs.parentNode.insertBefore(js, fjs);
   }(document, 'script', 'facebook-jssdk'));
</script>









</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-tw">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">湯瑪士的部落格</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">技術手扎！不定期更新</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首頁
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            關於
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            標籤
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分類
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/10/27/Reason-BasicType-Module/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Tomas Lin">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="湯瑪士的部落格">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Reason-BasicType-Module</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">發表於</span>
              
              <time title="創建於" itemprop="dateCreated datePublished" datetime="2018-10-27T18:11:14+08:00">
                2018-10-27
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分類於</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Reason/" itemprop="url" rel="index">
                    <span itemprop="name">Reason</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/10/27/Reason-BasicType-Module/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count fb-comments-count" data-href="http://yoursite.com/2018/10/27/Reason-BasicType-Module/" itemprop="commentCount">0</span> comments
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="Module"><a href="#Module" class="headerlink" title="Module"></a>Module</h1><p>模組就像是一個小的檔案</p>
<p>可以用 <code>let binding</code> 內嵌 module</p>
<h2 id="建立"><a href="#建立" class="headerlink" title="建立"></a>建立</h2><p>使用 <code>module</code> 這個關鍵字來宣告</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">module School = &#123;</span><br><span class="line">  type profession = Teacher | Director;</span><br><span class="line"></span><br><span class="line">  let person1 = Teacher;</span><br><span class="line">  let getProfession = (person) =&gt;</span><br><span class="line">    switch(person) &#123;</span><br><span class="line">    | Teacher =&gt; &quot;A teacher&quot;</span><br><span class="line">    | Director =&gt; &quot;A director&quot;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>模組中的值(包含型別) 可以像 <code>record</code> 一樣使用 <code>.</code> 來存取</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">module School = &#123;</span><br><span class="line">  type profession = Teacher | Director;</span><br><span class="line"></span><br><span class="line">  let person1 = Teacher;</span><br><span class="line">  let getProfession = (person) =&gt;</span><br><span class="line">    switch(person) &#123;</span><br><span class="line">    | Teacher =&gt; &quot;A teacher&quot;</span><br><span class="line">    | Director =&gt; &quot;A director&quot;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">let anotherPerson: School.profession = School.Teacher;</span><br><span class="line">print_endline(School.getProfession(anotherPerson));</span><br></pre></td></tr></table></figure>
<p>上面的範例中使用了 <code>School.profession</code> 的類型來宣告變數</p>
<p>巢狀的 <code>module</code> 也是一樣的使用方式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">module Mymodule = &#123;</span><br><span class="line">  module NestedModule = &#123;</span><br><span class="line">    let message = &quot;Hello&quot;;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">let message =  Mymodule.NestedModule.message;</span><br><span class="line">print_endline(message);</span><br></pre></td></tr></table></figure>
<h2 id="open-Module"><a href="#open-Module" class="headerlink" title="open Module"></a>open Module</h2><p>要一直前置加上模組名稱會很繁瑣</p>
<p>所以可以利用 <code>open</code> 來簡化</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/* let p: School.profession = School.getProfession(School.person1); */</span><br><span class="line">/*上述程式碼可以修改為*/</span><br><span class="line">open School;</span><br><span class="line">let p: profession = getProfession(person1);</span><br></pre></td></tr></table></figure>
<p><strong>note: 要謹慎使用 open 最好在 local scope 中使用，否則會很難了解變數來源</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">let p = &#123;</span><br><span class="line">  open School;</span><br><span class="line">  print_endline(&quot;hello!&quot;);</span><br><span class="line">  getProfession(person1);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="擴充模組"><a href="#擴充模組" class="headerlink" title="擴充模組"></a>擴充模組</h2><p>使用 <code>include</code> 讓 module 靜態擴展到另一個新的模組</p>
<p>這句話很難理解吧！</p>
<p>看個範例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">module BaseComponent = &#123;</span><br><span class="line">  let defaultGreeting = &quot;Hello&quot;;</span><br><span class="line">  let getAudience = (~excited) =&gt; excited ? &quot;hello&quot; : &quot;world&quot;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">module ActualComponent = &#123;</span><br><span class="line">  include BaseComponent;</span><br><span class="line">  let defaultGreeting = &quot;Hey&quot;;</span><br><span class="line">  let render = () =&gt; defaultGreeting ++ &quot; &quot; ++ getAudience(~excited=true);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">print_endline(BaseComponent.defaultGreeting); /* Hello */</span><br><span class="line">print_endline(ActualComponent.defaultGreeting); /* Hey */</span><br></pre></td></tr></table></figure>
<p>上述範例中 <code>ActualComponent</code> 因為有 <code>include BaseComponent;</code></p>
<p>所以會擁有 <code>BaseComponent</code> 的特性和方法</p>
<p>但是也可以在下面使用 <code>let</code> 來複寫某些參數或方法</p>
<p><strong>note: <code>open</code> 和 <code>include</code>是完全不一樣的 前者是將內容帶到你的 scope 你就不用每次都要加上模組名稱來取值，後者則是複製一份值到新的模組內</strong></p>
<p>在 <code>Reason</code> 中每一個檔案都是一個模組</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">/*FileA.re*/</span><br><span class="line">let a = 1;</span><br><span class="line">let b = 2;</span><br><span class="line"></span><br><span class="line">/*FileB.re*/</span><br><span class="line">include FileA;</span><br><span class="line">print_endline(a);</span><br></pre></td></tr></table></figure>
<h3 id="標記式"><a href="#標記式" class="headerlink" title="標記式"></a>標記式</h3><p>模組的類型稱為 <code>signature</code></p>
<p>模組的實作是 <code>re</code> 模組的宣告是 <code>rei</code></p>
<p>要建立一個 signature 要使用關鍵字 <code>module type</code></p>
<p>signature 名稱必須是大寫字母開頭</p>
<p>可以放置在 <code>rei</code> 檔案內</p>
<p>可以放在定義的 <code>{}</code> scope 內</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">module type EstablishmentType = &#123;</span><br><span class="line">  type profession;</span><br><span class="line">  let getProfession: profession =&gt; string;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>signature 宣告了 module 必須滿足的型態要求</p>
<p>使 module 和 signature 相同</p>
<p>形式如下:</p>
<ul>
<li><code>let x: int;</code> 要求 <code>let</code> 繫結名稱必須是 <code>x</code>，型別是 <code>int</code></li>
<li><code>type t = someType;</code> 要求型別欄位 <code>t</code> 必須與 <code>someType</code> 相同</li>
<li><code>type t;</code> 要求型別欄位 <code>t</code>，但並不強迫任何要求於 t 的實際、具體型別。 我們不能在標記式內使用 <code>t</code> 於其他項目來描述關係，例如 <code>let makePair: t =&gt; (t, t)</code> </li>
</ul>
<p>上述 <code>EstablishmentType</code> 範例中</p>
<ul>
<li>宣告一個類型 <code>profession</code></li>
<li>必須要有一個函式來取得 <code>profession</code> 的值</li>
</ul>
<h3 id="擴展-Module-類型"><a href="#擴展-Module-類型" class="headerlink" title="擴展 Module 類型"></a>擴展 Module 類型</h3><p>就像 Module 一樣</p>
<p>可以利用 include 來做擴展 module type</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">module type BaseComponent = &#123;</span><br><span class="line">  let defaultGreeting: string;</span><br><span class="line">  let getAudience: (~excited: bool) =&gt; string;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">module type ActualComponent = &#123;</span><br><span class="line">  /* the BaseComponent signature is copied over */</span><br><span class="line">  include BaseComponent;</span><br><span class="line">  let render: unit =&gt; string;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><strong>note: BaseComponent是 module type 而不是 module</strong></p>
<p>如果你沒有宣告 module type</p>
<p>可以透過實際的 module 來提取 <code>include (module type of ActualModuleName)</code></p>
<p>例如我們可以繼承 OCmal 中的公用模組 <code>List</code> </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">module type MyList = &#123;</span><br><span class="line">  include (module type of List);</span><br><span class="line">  let myListFun: list(&apos;a) =&gt; list(&apos;a);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="每個-rei-都是一個標記式"><a href="#每個-rei-都是一個標記式" class="headerlink" title="每個 rei 都是一個標記式"></a>每個 <code>rei</code> 都是一個標記式</h3><p>類似 <code>.re</code> 定義 Reason 模組</p>
<p><code>rei</code> 定義 Reason 模組類型</p>
<p>React.re 的標記式預設是暴露所有模組內欄位</p>
<p>因為沒有包含實作檔案</p>
<p><code>.rei</code> 在生態圈也用來作為相對應模組的文件</p>
<p>紀錄開放的 API</p>
<p><code>Module.re</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">type state = int;</span><br><span class="line">let render = (str) =&gt; str;</span><br></pre></td></tr></table></figure></p>
<p><code>Module.rei</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">type state = int;</span><br><span class="line">let render: string =&gt; string;</span><br></pre></td></tr></table></figure></p>
<h3 id="模組函式-functors"><a href="#模組函式-functors" class="headerlink" title="模組函式(functors)"></a>模組函式(functors)</h3><p>模組可以包含函式</p>
<p>就像在檔案裡面寫函式</p>
<p>但是這還是有些不一樣</p>
<p>因為 module 定義在不同層級</p>
<p>所以我們稱之為 <code>functors</code></p>
<ul>
<li>functors 使用關鍵字 <code>module</code> 而不是 <code>let</code></li>
<li>Functors 接受一個或多個模組作為參數並傳回一個模組</li>
<li>Functors 必須大寫字母開頭（就像是模組/標記式）</li>
<li>Functors 必須註解參數</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">module type Comparable = &#123;</span><br><span class="line">  type t;</span><br><span class="line">  let equal: (t, t) =&gt; bool;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">module MakeSet = (Item: Comparable) =&gt; &#123;</span><br><span class="line">  /* let&apos;s use a list as our naive backing data structure */</span><br><span class="line">  type backingType = list(Item.t);</span><br><span class="line">  let empty = [];</span><br><span class="line">  let add = (currentSet: backingType, newItem: Item.t) : backingType =&gt;</span><br><span class="line">    if (ListLabels.exists((x) =&gt; Item.equal(x, newItem), currentSet)) &#123;</span><br><span class="line">      currentSet;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      [</span><br><span class="line">        newItem,</span><br><span class="line">        ...currentSet /* prepend to the set and return it */</span><br><span class="line">      ]</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>上述是一個 <code>MakeSet</code> Functor</p>
<p>他接受一個 <code>Comparable</code> 類型的 module</p>
<p>會回傳一個包含此類型的新集合</p>
<p>Functor 也可以和函式一樣使用參數</p>
<p>如下例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">module type Comparable = &#123;</span><br><span class="line">  type t;</span><br><span class="line">  let equal: (t, t) =&gt; bool;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">module MakeSet = (Item: Comparable) =&gt; &#123;</span><br><span class="line">  /* let&apos;s use a list as our naive backing data structure */</span><br><span class="line">  type backingType = list(Item.t);</span><br><span class="line">  let empty = [];</span><br><span class="line">  let add = (currentSet: backingType, newItem: Item.t) : backingType =&gt;</span><br><span class="line">    if (ListLabels.exists((x) =&gt; Item.equal(x, newItem), currentSet)) &#123;</span><br><span class="line">      currentSet;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      [</span><br><span class="line">        newItem,</span><br><span class="line">        ...currentSet /* prepend to the set and return it */</span><br><span class="line">      ]</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line">module IntPair = &#123;</span><br><span class="line">  type t = (int, int);</span><br><span class="line">  let equal = ((x1, y1), (x2, y2)) =&gt; x1 == x2 &amp;&amp; y1 == y2;</span><br><span class="line">  let create = (x, y) =&gt; (x, y);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">module SetOfIntPairs = MakeSet(IntPair);</span><br></pre></td></tr></table></figure>
<h3 id="模組函式類別"><a href="#模組函式類別" class="headerlink" title="模組函式類別"></a>模組函式類別</h3><p>Like with module types, functor types also act to constrain and hide what we may assume about functors. The syntax for functor types are consistent with those for function types, but with types capitalized to represent the signatures of modules the functor accepts as arguments and return values. In the previous example, we’re exposing the backing type of a set; by giving MakeSet a functor signature, we can hide the underlying data structure!</p>
<p><strong>未翻譯</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">module type Comparable = &#123;</span><br><span class="line">  type t;</span><br><span class="line">  let equal: (t, t) =&gt; bool;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">module type MakeSetType = (Item: Comparable) =&gt; &#123;</span><br><span class="line">  type backingType;</span><br><span class="line">  let empty: backingType;</span><br><span class="line">  let add: (backingType, Item.t) =&gt; backingType;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">module MakeSet: MakeSetType = (Item: Comparable) =&gt; &#123;</span><br><span class="line">  /* let&apos;s use a list as our naive backing data structure */</span><br><span class="line">  type backingType = list(Item.t);</span><br><span class="line">  let empty = [];</span><br><span class="line">  let add = (currentSet: backingType, newItem: Item.t) : backingType =&gt;</span><br><span class="line">    if (ListLabels.exists((x) =&gt; Item.equal(x, newItem), currentSet)) &#123;</span><br><span class="line">      currentSet;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      [</span><br><span class="line">        newItem,</span><br><span class="line">        ...currentSet /* prepend to the set and return it */</span><br><span class="line">      ]</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">module IntPair = &#123;</span><br><span class="line">  type t = (int, int);</span><br><span class="line">  let equal = ((x1, y1), (x2, y2)) =&gt; x1 == x2 &amp;&amp; y1 == y2;</span><br><span class="line">  let create = (x, y) =&gt; (x, y);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">module SetOfIntPairs = MakeSet(IntPair);</span><br></pre></td></tr></table></figure>
<h2 id="結論"><a href="#結論" class="headerlink" title="結論"></a>結論</h2><p>要小心的是 <code>module</code> 和 <code>functor</code> 在不同樣的語言層級</p>
<p>你無法輕易的將他們傳遞給 <code>record</code> 或 <code>tuple</code></p>
<p>真的不得已的話一定要小心</p>
<p>因為很多時候只需要一個 <code>record</code> 或是 <code>function</code> 就夠了</p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Javascript/" rel="tag"># Javascript</a>
          
            <a href="/tags/IThome2018/" rel="tag"># IThome2018</a>
          
            <a href="/tags/Reason/" rel="tag"># Reason</a>
          
        </div>
      

      
      
        <div class="post-widgets">
        

        
          <div class="social-like">
            

            
              <div class="fb_like">
                <div class="fb-like" data-layout="button_count" data-share="true"></div>
              </div>
            
          </div>
        
        </div>
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/10/26/Express-Router/" rel="next" title="Express-Router">
                <i class="fa fa-chevron-left"></i> Express-Router
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/10/27/Express-Middleware/" rel="prev" title="Express-Middleware">
                Express-Middleware <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  
    <div class="comments" id="comments">
      <div class="fb-comments" data-href="http://yoursite.com/2018/10/27/Reason-BasicType-Module/" data-numposts="10" data-width="100%" data-colorscheme="light">
      </div>
    </div>
  


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目錄
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            本站概覽
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Tomas Lin</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives">
              
                  <span class="site-state-item-count">85</span>
                  <span class="site-state-item-name">文章</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">16</span>
                  <span class="site-state-item-name">分類</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">28</span>
                  <span class="site-state-item-name">標籤</span>
                </a>
              </div>
            

          </nav>

          

          <div class="links-of-author motion-element">
            
              
                <span class="links-of-author-item">
                  <a href="https://github.com/horsekitlin" target="_blank" title="GitHub">
                    
                      <i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  <a href="mailto:horsekit1982@gmail.com" target="_blank" title="E-Mail">
                    
                      <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
            
          </div>

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Module"><span class="nav-number">1.</span> <span class="nav-text">Module</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#建立"><span class="nav-number">1.1.</span> <span class="nav-text">建立</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#open-Module"><span class="nav-number">1.2.</span> <span class="nav-text">open Module</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#擴充模組"><span class="nav-number">1.3.</span> <span class="nav-text">擴充模組</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#標記式"><span class="nav-number">1.3.1.</span> <span class="nav-text">標記式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#擴展-Module-類型"><span class="nav-number">1.3.2.</span> <span class="nav-text">擴展 Module 類型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#每個-rei-都是一個標記式"><span class="nav-number">1.3.3.</span> <span class="nav-text">每個 rei 都是一個標記式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#模組函式-functors"><span class="nav-number">1.3.4.</span> <span class="nav-text">模組函式(functors)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#模組函式類別"><span class="nav-number">1.3.5.</span> <span class="nav-text">模組函式類別</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#結論"><span class="nav-number">1.4.</span> <span class="nav-text">結論</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Tomas Lin</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 強力驅動</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主題 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.3</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.3"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.3"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.3"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  




	





  





  








  





  

  

  

  

  

  

</body>
</html>
